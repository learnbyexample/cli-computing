<!doctypehtml><html class="sidebar-visible no-js light"lang=en><head><meta charset=UTF-8><title>Managing Processes - Computing from the Command Line</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="Linux Command Line and Shell Scripting for beginner to intermediate level users"name=description><meta content=width=device-width,initial-scale=1 name=viewport><meta content=#ffffff name=theme-color><meta content="Computing from the Command Line"property=og:title><meta content=website property=og:type><meta content="Linux Command Line and Shell Scripting for beginner to intermediate level users"property=og:description><meta content=https://learnbyexample.github.io/cli-computing/ property=og:url><meta content=https://learnbyexample.github.io/cli-computing/images/cli_computing_ls.png property=og:image><meta content=1280 property=og:image:width><meta content=720 property=og:image:height><meta content=summary_large_image property=twitter:card><meta content=@learn_byexample property=twitter:site><link href=favicon.svg rel=icon><link rel="shortcut icon"href=favicon.png><link href=css/variables.css rel=stylesheet><link href=css/general.css rel=stylesheet><link href=css/chrome.css rel=stylesheet><link href=FontAwesome/css/font-awesome.css rel=stylesheet><link href=fonts/fonts.css rel=stylesheet><link href=highlight.css rel=stylesheet><link href=tomorrow-night.css rel=stylesheet><link href=ayu-highlight.css rel=stylesheet><link href=style.css rel=stylesheet><body><script>var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";</script><script>try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }</script><script>var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');</script><script>var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);</script><nav aria-label="Table of contents"class=sidebar id=sidebar><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=cover.html>Cover</a><li class="chapter-item expanded affix"><a href=buy.html>Buy PDF/EPUB versions</a><li class="chapter-item expanded affix"><a href=preface.html>Preface</a><li class="chapter-item expanded"><a href=introduction-setup.html><strong aria-hidden=true>1.</strong> Introduction and Setup</a><li class="chapter-item expanded"><a href=command-line-overview.html><strong aria-hidden=true>2.</strong> Command Line Overview</a><li class="chapter-item expanded"><a href=managing-files-directories.html><strong aria-hidden=true>3.</strong> Managing Files and Directories</a><li class="chapter-item expanded"><a href=shell-features.html><strong aria-hidden=true>4.</strong> Shell Features</a><li class="chapter-item expanded"><a href=viewing-part-or-whole-file-contents.html><strong aria-hidden=true>5.</strong> Viewing Part or Whole File Contents</a><li class="chapter-item expanded"><a href=searching-files-and-filenames.html><strong aria-hidden=true>6.</strong> Searching Files and Filenames</a><li class="chapter-item expanded"><a href=file-properties.html><strong aria-hidden=true>7.</strong> File Properties</a><li class="chapter-item expanded"><a class=active href=managing-processes.html><strong aria-hidden=true>8.</strong> Managing Processes</a><li class="chapter-item expanded"><a href=multipurpose-text-processing-tools.html><strong aria-hidden=true>9.</strong> Multipurpose Text Processing Tools</a><li class="chapter-item expanded"><a href=sorting-stuff.html><strong aria-hidden=true>10.</strong> Sorting Stuff</a><li class="chapter-item expanded"><a href=comparing-files.html><strong aria-hidden=true>11.</strong> Comparing Files</a><li class="chapter-item expanded"><a href=assorted-text-processing-tools.html><strong aria-hidden=true>12.</strong> Assorted Text Processing Tools</a><li class="chapter-item expanded"><a href=shell-scripting.html><strong aria-hidden=true>13.</strong> Shell Scripting</a><li class="chapter-item expanded"><a href=shell-customization.html><strong aria-hidden=true>14.</strong> Shell Customization</a></li><br><hr><li class="chapter-item expanded"><i class="fa fa-github"id=git-repository-button></i><a href=https://github.com/learnbyexample/cli-computing>   Source code</a><li class="chapter-item expanded"><i class="fa fa-home"id=home-button></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i class="fa fa-book"id=book-button></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i class="fa fa-envelope"id=mail-button></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a><li class="chapter-item expanded"><i class="fa fa-twitter"id=twitter-button></i><a href=https://twitter.com/learn_byexample>   Twitter</a></ol></div><div class=sidebar-resize-handle id=sidebar-resize-handle></div></nav><div class=page-wrapper id=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div class="menu-bar sticky bordered"id=menu-bar><div class=left-buttons><button aria-label="Toggle Table of Contents"title="Toggle Table of Contents"aria-controls=sidebar class=icon-button id=sidebar-toggle type=button><i class="fa fa-bars"></i></button><button aria-label="Change theme"title="Change theme"aria-controls=theme-list aria-expanded=false aria-haspopup=true class=icon-button id=theme-toggle type=button><i class="fa fa-paint-brush"></i></button><ul aria-label=Themes class=theme-popup id=theme-list role=menu><li role=none><button class=theme id=light role=menuitem>Light (default)</button><li role=none><button class=theme id=rust role=menuitem>Rust</button><li role=none><button class=theme id=coal role=menuitem>Coal</button><li role=none><button class=theme id=navy role=menuitem>Navy</button><li role=none><button class=theme id=ayu role=menuitem>Ayu</button></ul><button aria-label="Toggle Searchbar"title="Search. (Shortkey: s)"aria-controls=searchbar aria-expanded=false aria-keyshortcuts=S class=icon-button id=search-toggle type=button><i class="fa fa-search"></i></button></div><h1 class=menu-title>Computing from the Command Line</h1><div class=right-buttons><a aria-label=Blog href=https://learnbyexample.github.io title=Blog> <i class="fa fa-home"id=home-button></i> </a><a aria-label=Twitter href=https://twitter.com/learn_byexample title=Twitter> <i class="fa fa-twitter"id=twitter-button></i> </a><a aria-label="Git repository"title="Git repository"href=https://github.com/learnbyexample/cli-computing> <i class="fa fa-github"id=git-repository-button></i> </a></div></div><div class=hidden id=search-wrapper><form class=searchbar-outer id=searchbar-outer><input placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header id=searchbar name=searchbar type=search></form><div class="searchresults-outer hidden"id=searchresults-outer><div class=searchresults-header id=searchresults-header></div><ul id=searchresults></ul></div></div><script>document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });</script><div class=content id=content><main><div class=sidetoc><nav class=pagetoc></nav></div><h1 id=managing-processes><a class=header href=#managing-processes>Managing Processes</a></h1><p>This chapter gives a basic overview of process management for interactive usage only. Handling processes for other use cases, such as system administration, requires a more robust solution. See <a href=https://mywiki.wooledge.org/ProcessManagement>mywiki.wooledge: Process Management</a> to get started for such use cases.<h2 id=definitions><a class=header href=#definitions>Definitions</a></h2><p>Program is a set of instructions written to perform a task.<ul><li><strong>Process</strong> is any running program<li><strong>Daemon</strong> are background processes<li><strong>Job</strong> is a process that is not a daemon <ul><li>i.e. jobs are interactive programs under user control</ul></ul><h2 id=running-jobs-in-background><a class=header href=#running-jobs-in-background>Running jobs in background</a></h2><p>Some commands and scripts can take more than few minutes to complete, and you might still need to continue using the shell. If you are not dependent on the current shell environment, you could open another instance and continue working.<p>Another option is to push the job to the background, either at the time of command invocation itself or after the fact. Make sure to redirect standard output and error to avoid interfering with your continued interactive usage. Appending a <code>&</code> to the command will execute it in the background.<pre><code class=language-bash>$ tkdiff ip.txt ip.txt.bkp &
[1] 12726
</code></pre><p>In the above example, <code>[1]</code> refers to the job number and <code>12726</code> is the PID (process ID). You can use the commands <code>jobs</code> and <code>ps</code> to track active jobs:<pre><code class=language-bash>$ jobs
[1]+  Running                 tkdiff ip.txt ip.txt.bkp &

$ ps
    PID TTY          TIME CMD
   9657 pts/1    00:00:00 bash
  12726 pts/1    00:00:00 wish
  12730 pts/1    00:00:00 ps
</code></pre><p>What if you forgot to append <code>&</code> to the command? Follow these steps:<ul><li><code>Ctrl+z</code> — suspend the current running job<li><code>bg</code> — push the recently suspended job to the background<li>continue using shell<li><code>fg</code> — bring the recently pushed background job to the foreground <ul><li>you can use <code>fg %n</code> to bring the <code>n</code>th job number to the foreground</ul></ul><p>Here's a demo that you can try:<pre><code class=language-bash># sleep for 30 seconds (used here for illustration purposes)
# press Ctrl+z to suspend this job
# you'll get the job number, status and the command in the output
$ sleep 30
^Z
[1]+  Stopped                 sleep 30

# put the job considered as the current by the shell to the background 
$ bg
[1]+ sleep 30 &

# use 'jobs' or 'ps' to check list of jobs
# '+' after the job number indicates the current job
$ jobs
[1]+  Running                 sleep 30 &
$ ps
    PID TTY          TIME CMD
   2380 pts/0    00:00:00 bash
   6160 pts/0    00:00:00 sleep
   6162 pts/0    00:00:00 ps

# bring the most recently pushed background job to the foreground
$ fg
sleep 30
$ 
</code></pre><blockquote><p><img alt=info src=images/info.svg> <code>jobs</code>, <code>bg</code> and <code>fg</code> are shell builtins. See <a href=https://www.gnu.org/software/bash/manual/bash.html#Job-Control>bash manual: Job Control</a> for more details. See also <a href=https://www.digitalocean.com/community/tutorials/how-to-use-bash-s-job-control-to-manage-foreground-and-background-processes>this tutorial on job control</a>.</blockquote><blockquote><p><img alt=info src=images/info.svg> See also <a href=https://mywiki.wooledge.org/ProcessManagement#I_want_to_run_something_in_the_background_and_then_log_out.>I want to run something in the background and then log out</a> — <code>screen</code>, <code>tmux</code>, <code>nohup</code>, <code>disown</code>, etc.</blockquote><h2 id=ps><a class=header href=#ps>ps</a></h2><p>The <code>ps</code> command gives a snapshot of the current processes. A few examples were already seen earlier in this chapter. Here's an example with the <code>-f</code> option (full-format listing):<pre><code class=language-bash>$ ps -f
UID          PID    PPID  C STIME TTY          TIME CMD
learnby+   12299   12298  0 16:39 pts/0    00:00:00 bash
learnby+   12311   12299  0 16:39 pts/0    00:00:00 ps -f
</code></pre><p>The fields in the above example are effective user ID (UID), process ID (PID), parent process ID (PPID), processor utilization (C), starting time (STIME), controlling terminal (TTY), cumulative CPU time (TIME) and command with all its arguments (CMD). You can use the <code>-o</code> option to customize the fields you want. The <code>--sort</code> option will help you to sort based on specific fields. See <a href=https://www.mankier.com/1/ps#Standard_Format_Specifiers>ps manual: Standard Format Specifiers</a> for complete list of formats available.<p>The <code>-e</code> (or <code>-A</code>) option selects all processes. This option is typically used in combination with <code>grep</code> for filtering:<pre><code class=language-bash>$ ps -e | grep 'vim'
   6195 ?        00:03:13 gvim
</code></pre><blockquote><p><img alt=info src=./images/info.svg> See also <a href=https://linuxjourney.com/lesson/monitor-processes-ps-command>linuxjourney: ps tutorial</a>.</blockquote><h2 id=pgrep><a class=header href=#pgrep>pgrep</a></h2><p>The <code>pgrep</code> command helps you filter processes based on their name and attributes. By default, it matches against the process name, for example:<pre><code class=language-bash>$ ps -e | grep 'vim'
   2006 ?        00:00:27 gvim
   3992 pts/2    00:00:00 vim

$ pgrep 'vim'
2006
3992
</code></pre><p>You can use the <code>-l</code> option to display the process name as well (PID is shown by default).<pre><code class=language-bash>$ pgrep -l 'vim'
2006 gvim
3992 vim
</code></pre><p>To match the process name exactly (instead of matching anywhere), use the <code>-x</code> option.<pre><code class=language-bash>$ pgrep -x 'vim'
3992
</code></pre><p>The <code>-a</code> option will list the full command line (the <code>-l</code> option seen earlier gives only the name, not the arguments).<pre><code class=language-bash>$ pgrep -a 'vim'
2006 gvim -p notes.txt src/managing-processes.md
3992 vim substitution.md
</code></pre><blockquote><p><img alt=info src=./images/info.svg> There are several more options like filtering based on effective UID, PPID, etc. See <a href=https://www.mankier.com/1/pgrep>pgrep manual</a> for more details.</blockquote><h2 id=kill><a class=header href=#kill>kill</a></h2><p>Sometimes, a process might not be responding to your interaction, might be taking too long, accidentally uses too much memory, and so on. You can use the <code>kill</code> command to manage such processes.<p>As mentioned at the beginning of this chapter, these examples are suggested for interactive processes initiated by you (other usage, for example in scripts, will require different strategy). Be 100% sure before you attempt to send signals to manage processes.<p>You can pass signals by name or by their associated number. Use <code>kill -l</code> to get a full list of signals. See also <a href=https://unix.stackexchange.com/q/317492/109046>unix.stackexchange: List of Signals</a> and <a href=https://unix.stackexchange.com/q/6332/109046>unix.stackexchange: What causes various signals to be sent?</a><pre><code class=language-bash># first 20 signals (out of 64) listed below 
$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
...
</code></pre><p>You can use PID or job number to specify the process to which the signal has to be sent. By default, <code>SIGTERM</code> (<code>15</code>) is sent, which is a polite way to ask the program to terminate. Here's an example:<pre><code class=language-bash># 'sleep' is used here to emulate a long running process
# press Ctrl+z to suspend this command
$ sleep 100
^Z
[1]+  Stopped                 sleep 100

# terminate job number 1
# by default, SIGTERM is sent
$ kill %1

# just press Enter
$
[1]+  Terminated              sleep 100
</code></pre><p>Note that in the above example, pressing <code>Ctrl+z</code> actually sends the <code>SIGTSTP</code> (<code>20</code>) signal. Programs usually handle such signals to find a safer spot to suspend. Pressing <code>Ctrl+c</code> sends the <code>SIGINT</code> (<code>2</code>) signal, usually used to abort a process (depends on how the program handles it). You can use <code>Ctrl+\</code> to send <code>SIGQUIT</code> (<code>3</code>), typically used to ask the program to quit and give a <a href=https://en.wikipedia.org/wiki/Core_dump>core dump</a>. See also <a href=https://stackoverflow.com/q/690415/4082052>stackoverflow: gracefully shutdown processes</a>.<p>Here's an illustration to show how to pass signals by their names and numerical values:<pre><code class=language-bash>$ sleep 100 &
[1] 10051

# suspend the above job, similar to using Ctrl+z
# -20 refers to the signal number 20, i.e. SIGTSTP
# 10051 is the PID
$ kill -20 10051

[1]+  Stopped                 sleep 100

# resume the job in background
$ bg
[1]+ sleep 100 &

# -s option allows you to specify signal by its name
# '-s SIGTERM' is optional here, since that is the default
$ kill -s SIGTERM 10051
$ 
[1]+  Terminated              sleep 100
</code></pre><blockquote><p><img alt=info src=./images/info.svg> <img alt=warning src=./images/warning.svg> If you need to terminate a process at all costs, you can use <code>SIGKILL</code> (<code>9</code>). This is a signal that cannot be blocked by programs. See also <a href=https://unix.stackexchange.com/q/8916/109046>unix.stackexchange: why kill -9 should be avoided</a>.</blockquote><blockquote><p><img alt=info src=./images/info.svg> Note that your system may have several different implementations of the <code>kill</code> command. The shell builtin version has been discussed in this section.</blockquote><h2 id=top><a class=header href=#top>top</a></h2><p>The <code>top</code> command displays processes in a tabular format along with information like PID, process name, memory usage and so on. Here's a sample screenshot:<p align=center><img alt="sample screenshot for the top command"src=images/top_example.png><p>This command opens an interactive session, and automatically updates the information being displayed as well. You can press <code>M</code> (uppercase) to sort the processes by memory usage. Press <code>e</code> repeatedly to display memory sizes in terms of mega/giga/etc. Press <code>h</code> for help and press <code>q</code> to quit the session.<blockquote><p><img alt=info src=./images/info.svg> Press <code>W</code> (uppercase) to write the current settings to the <code>toprc</code> configuration file and quit. The next time you use the <code>top</code> command, it will be displayed in the format that was saved.</blockquote><blockquote><p><img alt=info src=./images/info.svg> See also alternative implementations like <a href=https://github.com/htop-dev/htop/>htop</a> and <a href=https://github.com/aristocratos/btop>btop</a>.</blockquote><h2 id=free><a class=header href=#free>free</a></h2><p>The <code>free</code> command displays information about your system memory. Here's an example:<pre><code class=language-bash># -h option shows the results in human readable format
$ free -h
              total        used        free      shared  buff/cache   available
Mem:          7.6Gi       2.4Gi       2.3Gi       267Mi       2.9Gi       4.7Gi
Swap:         3.6Gi          0B       3.6Gi
</code></pre><h2 id=further-reading><a class=header href=#further-reading>Further Reading</a></h2><ul><li><a href=https://mywiki.wooledge.org/ProcessManagement>mywiki.wooledge: Process Management</a><li><a href=https://ryanstutorials.net/linuxtutorial/processes.php>ryanstutorials: Process Management</a><li><a href=https://www.digitalocean.com/community/tutorials/how-to-use-ps-kill-and-nice-to-manage-processes-in-linux>digitalocean: Managing Linux Processes</a></ul><h2 id=exercises><a class=header href=#exercises>Exercises</a></h2><p><strong>1)</strong> How would you invoke a command to be executed in the background? And what would you do push a job to the background after it has already been launched? What commands can you use to track active jobs?<p><strong>2)</strong> What do <code>+</code> and <code>-</code> symbols next to job numbers indicate?<p><strong>3)</strong> When would you use <code>fg %n</code> and <code>bg %n</code> instead of just <code>fg</code> and <code>bg</code> respectively?<p><strong>4)</strong> Which option will help you customize the output fields needed for the <code>ps</code> command?<p><strong>5)</strong> What's the difference between <code>pgrep -a</code> and <code>pgrep -l</code> options?<p><strong>6)</strong> If the job number is <code>2</code>, would you use <code>kill %2</code> or <code>kill 2</code> to send <code>SIGTERM</code> to that process?<p><strong>7)</strong> Which signal does the <code>Ctrl+c</code> shortcut send to the currently running process?<p><strong>8)</strong> Which command helps you to continuously monitor processes, along with details like PID, memory usage, etc?<p><strong>9)</strong> Which key will help you manipulate kill tasks from within the <code>top</code> session?<p><strong>10)</strong> What does the <code>free</code> command do?</main><nav aria-label="Page navigation"class=nav-wrapper><a aria-label="Previous chapter"class="mobile-nav-chapters previous"title="Previous chapter"aria-keyshortcuts=Left href=file-properties.html rel=prev> <i class="fa fa-angle-left"></i> </a><a aria-label="Next chapter"class="mobile-nav-chapters next"title="Next chapter"aria-keyshortcuts=Right href=multipurpose-text-processing-tools.html rel=next> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav aria-label="Page navigation"class=nav-wide-wrapper><a aria-label="Previous chapter"class="nav-chapters previous"title="Previous chapter"aria-keyshortcuts=Left href=file-properties.html rel=prev> <i class="fa fa-angle-left"></i> </a><a aria-label="Next chapter"class="nav-chapters next"title="Next chapter"aria-keyshortcuts=Right href=multipurpose-text-processing-tools.html rel=next> <i class="fa fa-angle-right"></i> </a></nav></div><script>window.playground_copyable = true;</script><script charset=utf-8 src=elasticlunr.min.js></script><script charset=utf-8 src=mark.min.js></script><script charset=utf-8 src=searcher.js></script><script charset=utf-8 src=clipboard.min.js></script><script charset=utf-8 src=highlight.js></script><script charset=utf-8 src=book.js></script><script src=sidebar.js></script>